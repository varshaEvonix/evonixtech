<%- include ../admin/admin_head.ejs %>
<%- include ../admin/sidebar.ejs %>
<section id="main-content">
    <section class="wrapper">

        <div class="row">
            <div class="col-lg-9 main-chart">

                <h1 class="phead">About us</h1>
                <br>
                <div class="panel panel-default">
                    <div class="panel-body">

                        <!--<form action="/updateaboutus" class="form-group" method="POST" role="form">-->
                        <form class="form" ng-submit="submitForm()" name="aboutusform" novalidate>
                            <div class="form-group row">
                                <label class="col-xs-2 control-label">Enter Title</label>
                                <div class="col-xs-10">
                                    <input type="text" ng-model="admin.about_us_title" name="about_us_title" id="about_us_title" value="" class="form-control" required>
                                    <span ng-show="submitted && aboutusform.about_us_title.$error.required"  class="help-block has-error ng-hide">Title is required.</span>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-xs-2 control-label">Enter Description</label>
                                <div class="col-xs-10">
                                    <!--<textarea class="form-control" ng-model="admin.about_us" rows="5" cols="104" name="about_us"  required><%= recordset.about_us %></textarea>-->


                                    <textarea ng-model="admin.about_us" name="about_us" id="about_us"  required><%= recordset.about_us %></textarea>


                                    <span ng-show="submitted && aboutusform.about_us.$error.required"  class="help-block has-error ng-hide description">Description is required.</span>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-xs-2 control-label">Enter Video Link</label>
                                <div class="col-xs-10">
                                    <input type="text" name="video_link" id="video_link" ng-model="admin.video_link" class="form-control" value="" required>
                                    <span ng-show="submitted && aboutusform.video_link.$error.required"  class="help-block has-error ng-hide">Video Link is required.</span>
                                </div>
                            </div>
                            <div class="form-group row">
                                <input type="submit" ng-click="submitted = true" class="btn btn-primary col-xs-offset-5 update_about_us" value="Update">
                            </div>
                        </form>

                    </div>
                </div>

            </div>

            <div class="col-lg-3 ds">
                <!--COMPLETED ACTIONS DONUTS CHART-->
                <h3>NOTIFICATIONS</h3>

                <!-- First Action -->
                <div class="desc">
                    <div class="thumb">
                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                    </div>
                    <div class="details">
                        <p><muted>2 Minutes Ago</muted><br/>
                        <a href="#">James Brown</a> subscribed to your newsletter.<br/>
                        </p>
                    </div>
                </div>
                <!-- Second Action -->
                <div class="desc">
                    <div class="thumb">
                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                    </div>
                    <div class="details">
                        <p><muted>3 Hours Ago</muted><br/>
                        <a href="#">Diana Kennedy</a> purchased a year subscription.<br/>
                        </p>
                    </div>
                </div>
                <!-- Third Action -->
                <div class="desc">
                    <div class="thumb">
                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                    </div>
                    <div class="details">
                        <p><muted>7 Hours Ago</muted><br/>
                        <a href="#">Brandon Page</a> purchased a year subscription.<br/>
                        </p>
                    </div>
                </div>
                <!-- Fourth Action -->
                <div class="desc">
                    <div class="thumb">
                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                    </div>
                    <div class="details">
                        <p><muted>11 Hours Ago</muted><br/>
                        <a href="#">Mark Twain</a> commented your post.<br/>
                        </p>
                    </div>
                </div>
                <!-- Fifth Action -->
                <div class="desc">
                    <div class="thumb">
                        <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
                    </div>
                    <div class="details">
                        <p><muted>18 Hours Ago</muted><br/>
                        <a href="#">Daniel Pratt</a> purchased a wallet in your store.<br/>
                        </p>
                    </div>
                </div>

                <!-- USERS ONLINE SECTION -->
                <h3>DONORS</h3>
                <!-- First Member -->
                <div class="desc">
                    <div class="thumb">
                        <img class="img-circle" src="../../index_files/stdash/img/ui-divya.jpg" width="35px" height="35px" align="">
                    </div>
                    <div class="details">
                        <p><a href="#">DIVYA MANIAN</a><br/>
                        <muted>Available</muted>
                        </p>
                    </div>
                </div>
                <!-- Second Member -->
                <div class="desc">
                    <div class="thumb">
                        <img class="img-circle" src="../../index_files/stdash/img/ui-sherman.jpg" width="35px" height="35px" align="">
                    </div>
                    <div class="details">
                        <p><a href="#">DJ SHERMAN</a><br/>
                        <muted>I am Busy</muted>
                        </p>
                    </div>
                </div>
                <!-- Third Member -->
                <div class="desc">
                    <div class="thumb">
                        <img class="img-circle" src="../../index_files/stdash/img/ui-danro.jpg" width="35px" height="35px" align="">
                    </div>
                    <div class="details">
                        <p><a href="#">DAN ROGERS</a><br/>
                        <muted>Available</muted>
                        </p>
                    </div>
                </div>
                <!-- Fourth Member -->
                <div class="desc">
                    <div class="thumb">
                        <img class="img-circle" src="../../index_files/stdash/img/ui-zac.jpg" width="35px" height="35px" align="">
                    </div>
                    <div class="details">
                        <p><a href="#">Zac Sniders</a><br/>
                        <muted>Available</muted>
                        </p>
                    </div>
                </div>
                <!-- Fifth Member -->
                <div class="desc">
                    <div class="thumb">
                        <img class="img-circle" src="../../index_files/stdash/img/ui-sam.jpg" width="35px" height="35px" align="">
                    </div>
                    <div class="details">
                        <p><a href="#">Marcel Newman</a><br/>
                        <muted>Available</muted>
                        </p>
                    </div>
                </div>

                <!-- CALENDAR-->
                <div id="calendar" class="mb">
                    <div class="panel green-panel no-margin">
                        <div class="panel-body">
                            <div id="date-popover" class="popover top" style="cursor: pointer; disadding: block; margin-left: 33%; margin-top: -50px; width: 175px;">
                                <div class="arrow"></div>
                                <h3 class="popover-title" style="disadding: none;"></h3>
                                <div id="date-popover-content" class="popover-content"></div>
                            </div>
                            <div id="my-calendar"></div>
                        </div>
                    </div>
                </div><!-- / calendar -->

            </div><!-- /col-lg-3 -->
        </div>
    </section>
</section>

<%- include ../admin/stufoot.ejs %>
<script>
    $('#aboutus').addClass('active');
    $('#static-pages').addClass('active');
</script>
<script src="../../index_files/stdash/js/tinymce/jquery.tinymce.min.js"></script>
<script src="../../index_files/stdash/js/tinymce/tinymce.min.js"></script>
<script>
    tinymce.init({
        selector: 'textarea',
        height: 300,
        plugins: [
            'advlist autolink lists link image charmap print preview anchor',
            'searchreplace visualblocks code fullscreen',
            'insertdatetime media table contextmenu paste code'
        ],
        toolbar: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image',
        content_css: '//www.tinymce.com/css/codepen.min.css'
    });

    var postApp = angular.module('postApp', []);
    postApp.controller('postController', function ($scope, $http) {
        $scope.admin = {};
                $scope.admin.about_us_title = '<%= recordset.name %>'
                $scope.admin.video_link = '<%= recordset.video_link %>'
                $scope.admin.about_us = '<%= recordset.about_us %>'
                $scope.submitForm = function () {
                    var text = tinymce.activeEditor.getContent({
                        format: 'text'
                    });
                    $scope.admin.about_us = text;
                    if ($scope.aboutusform.$valid) {
                        $http({
                            method: 'POST',
//                    dataType: 'json',
                            url: '/updateaboutus',
                            data: $scope.admin, //forms user object
                            headers: {'Content-Type': 'application/json'}
                        }).success(function (data) {
                            window.location = '/admin/aboutus';
                        });
                    }
                };
    });
//    });

</script>

